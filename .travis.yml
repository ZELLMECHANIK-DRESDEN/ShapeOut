notifications:
  email: false
dist: xenial
sudo: required
language: python
python: 2.7
virtualenv:
  system_site_packages: true
addons:
  apt:
    packages:
    - gfortran
    - python-chaco
    - python-numpy
    - python-scipy
    - python-wxgtk3.0
    - r-base
    - r-recommended
before_install:
# install lme4
- sudo R -e "install.packages('lme4', repos='http://cran.r-project.org')"
install:
# install binary packages
- travis_retry pip install --upgrade pip setuptools wheel
# install all dependencies
- travis_retry pip install simplejson appdirs h5py imageio nptdms pyper
- travis_retry pip install . --no-deps
# install special dependencies
- travis_retry pip install git+git://github.com/ZELLMECHANIK-DRESDEN/dclab.git
- travis_retry pip install git+git://github.com/ZELLMECHANIK-DRESDEN/fcswrite.git
# for tests:
- travis_retry pip install codecov coverage
- pip freeze
script:
- py.test tests/
- coverage run --source=shapeout ./setup.py test
- coverage report -m
after_success:
- codecov

